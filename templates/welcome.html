<!DOCTYPE html>
<html>
<head>
    <title>Welcome</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            overflow: hidden;
            background: black;
        }
        video {
            width: 100vw;
            height: 100vh;
            object-fit: cover;
        }
    </style>
</head>
<body>
    <video id="welcome-video" autoplay loop muted>
        <source src="{{ url_for('static', filename='videos/Video_inicial.mp4') }}" type="video/mp4">
        Your browser does not support the video tag.
    </video>
    <script>
        const redirectFlag = "{{ redirect_flag }}";
        const idxStr = "{{ idx }}";  // will be empty string if None
        const puzzleIdx = idxStr ? parseInt(idxStr, 10) : null;

        document.body.addEventListener('click', () => {
            const form = document.createElement('form');
            form.method = 'POST';

            if (redirectFlag === "start") {
                form.action = "{{ url_for('play_video_groups') }}";
            } else if (redirectFlag.startsWith("puzzle") && puzzleIdx !== null) {
                form.action = `/videoPuzzles/${puzzleIdx}`;
            } else {
                form.action = "{{ url_for('play_video_groups') }}";
            }

            document.body.appendChild(form);
            form.submit();
        });
    </script>
</body>
</html>
